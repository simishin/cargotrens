<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="UTF-8">
  <title>driver List</title>
  <link rel="stylesheet" type="text/css" th:href="@{/webjars/bootstrap/css/bootstrap.min.css}"/>
  <link rel="stylesheet" type="text/css" th:href="@{/webjars/bootstrap/css/bootstrap-theme.min.css}"/>
</head>
<body>
<header th:insert="~{layout/page-layouts.html :: header}"></header>
<div class="container-fluid">
<!--  1-администратор= удаление выполненных заказов-->
<!--  2- диспетчер = распределение заказов по водителям-->
<!--  3- водитель = отмечает доставку заказа-->
  <h2 class="text-center">Доставка Заказов</h2>
  <p class="bg-info"><span class="badge">===[[${irole}]]===</span></p>



  <!-- вывод goodMsg если он есть -->
  <div th:if="${gooMsg != null}" class="alert alert-success">
    [[${gooMsg}]]
  </div>

  <div class="col-11 table-responsive">
    <table class="table table-striped table-hover table-bordered">
      <thead>
      <tr class="table-info text-center">
        <th class="col-1 text-center">№</th>
        <th class="col-2">Имя</th>
        <th class="col-1">габариты</th>
        <th class="col-1">Вес</th>
        <th class="col-1">Направление</th>
        <th class="col-1">Автор</th>
        <th class="col-1">Водитель</th>
        <th class="col-3"></th>
      </tr>
      </thead>
      <tbody>
      <th:block th:each="elm: ${elms}">
        <tr>
          <td>[[${elm.id}]]</td>
          <td>[[${elm.name}]]</td>
          <td>[[${elm.dimension}]]</td>
          <td>[[${elm.gross}]]</td>
          <td>[[${elm.orientation}]]</td>
          <td><small>[[${elm.dispatcher}]]</small></td>
          <td>[[${elm.driver}]] </td>
          <td>
            <div class="btn-group">
              <a th:href="@{'/order/detail/'+${elm.id}}"
                 class="btn bg-warning btn-sm">Detail</a>
              <div th:switch="${irole}">
                <span th:case="1"><a   th:href="@{'/driver/delete/'+${elm.id}}"  class="btn bg-primary btn-sm">Удалить</a></span>
                <span th:case="2" ><a  th:href="@{'/driver/ship/'+${elm.id}}"  class="btn bg-success btn-sm">отправить</a></span>
                <span th:case="3">
                  <a th:if="${elm.status}==1" th:href="@{'/driver/take/'+${elm.id}}"  class="btn bg-danger btn-sm">Взять</a>
                  <a th:if="${elm.status}==2" th:href="@{'/driver/deliver/'+${elm.id}}"  class="btn bg-success btn-sm">Доставлен</a>
                </span>
              </div>
            </div>
          </td>

          <td th:switch="${elm.status}">
            <span th:case="1" class="text-danger" th:text="сформирован"></span>
            <span th:case="2" class="text-primary" th:text="передан "></span>
            <span th:case="3" class="text-success" th:text="доставлен"></span>
            <span th:case="0" class="text-muted" th:text="подготавливается"></span>
          </td>
       </tr>
      </th:block>
      </tbody>
    </table>
  </div>


</div>
<br>
<footer  th:insert="~{layout/page-layouts.html :: footer}"></footer>
</body>
</html>
